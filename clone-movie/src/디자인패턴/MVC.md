## MVC Pattern

디자인 패턴중에 하나인 MVC 패턴을 공부하기 위해 쓴 글이다.

---

### 목차

- 디자인 패턴이란?
- MVC 패턴이란?
- 특징
- 장점
- 단점
- Model
- View
- Controller
- MVC 패턴을 쓰는 이유
- MVC 패턴의 문제
- Flux
  - Dispatch
  - Store
  - View
  - Action

---

### 디자인 패턴?

프로그램이나 어떤 특정한 것을 개발하는 중에 발생헀던 문제점들을 정리하여 상황에 따라 간편하게 적용해서 쓸 수 있는 것을 정리한 것이다. 특정한 규약을 통해 쉽게 쓸 수 있는 형태로 만든 것이라 할 수 있다. ex)
라이브러리, 프레임 워크

---

### MVC 패턴?

디자인 패턴 중 하나로 Model, View, Controller 의 약자로 하나의 애플리케이션, 프로젝트를 구성할 때 구성 요소를 세 가지로 나눈 패턴을 의미한다.

---
![이미지](https://mblogthumb-phinf.pstatic.net/MjAxNzAzMjVfMjUw/MDAxNDkwNDM4NzI4MTIy.4ZtITJJKJW_Nj1gKST0BhKMAzqmMaYIj9PobYJMFD4Ig.xTHT-0qyRKXsA4nZ2xKPNeCxeU2-tLIc-4oyrWq5WBgg.PNG.jhc9639/mvc_role_diagram.png?type=w800)
출처 : https://m.blog.naver.com/jhc9639/220967034588

---

### 특징

Controller는 여러개의 View를 선택할 수 있ㄷ는 1:n 구조이며 직접 업데이트 하지 않는다. (View는 Controller를 알지 못한다.)

---
### 장점

MVC패턴의 장점은 널리 사용되고 있는 패턴이며 가장 단순하다. 보편적인 디자인 패턴이다.

---
### 단점

View, Model 의 사이의 의존성이 높다. View, Model의 높은 의존성은 애플리케이션이 커질수록 복잡해지고 유지보수가 어려워 질 수 있다.

---
### Model

애플리케이션의 정보 및 데이터를 의미한다. 또한 데이터 정보들의 가공을 책임지는 컴토넌트로 다음과 같은 규칙이 존재한다.

1. 사용자가 편집하기 원하는 모든 데이터를 가지고 있어야 한다.
2. View 또는 Controller 에 대해 어떤 정보도 알지 못해야 한다.
3. 변경이 일어나는 경우 이벤트를 발생시켜 전달해야 하며, 모델 변경 이벤트를 수신 받을 수 있는 방법을 구현해야 한다. 또한 재사용 가능하며 다른 인터페이스에서도 변하지 않아야 한다.

---
### View

사용자 인터페이스 요소를 나타내며 입출력을 담당한다. 데이터를 기반으로 사용자들이 볼 수 있는 화면으로 다음과 같은 규칙이 존재한다.

1. Model이 가지고 있는 정보를 따로 저장해서는 안된다.
2. Model이나 Controller와 같이 다른 구성요소는 몰라야한다. (받은 데이터 표시만)
3. 변경이 일어난 경우 변경을 알리는 방법을 구현해야 하며, 재사용하기 위한 설계를 쉽게 해야한다.

---
### Controller

데이터와 사용자 인터페이스 사이의 다리 역할이며 사용자가 데이터 수정 요청하는 이벤트를 처리하는 역할로 다음과 같은 규칙이 존재한다.

1. Model, View에 대해 알아야 한다. Model과 View는 서로 존재를 모르고 변경을 외부로 알리기 때문에 중재하기 위해서는 필수적으로 알아야한다.
2. Model, View를 모니터링 해야 한다.

---
### MVC 패턴을 쓰는 이유?

서로 분리되어 각자의 역할을 집중할 수 있으며, 유지보수 및 확장성, 유연성, 중복 코딩을 방지 할 수 있어서 효율적이다. 결국 MVC 패턴은 어떻게 나눌 것인가?에 대한 해답의 가이드라인 이라고 할 수 있다.

---
### MVC 패턴의 문제점

MVC 패턴에서 Controller는 Model의 데이터를 조회하거나 업데이트하는 역할을 한다. Model이 업데이트 되면, View는 화면에 반영한다.
View에서 Model로 전달하여 업데이트되고, 업데이트 된 View가 다시 다른 Model을 업데이트 한다면, 또 다른 View가 업데이트 될 수 있다.
이러한 방식은 복잡하지 않은 애플리케이션에서는 문제가 되지 않지만 규모가 커지면 복잡해진다. 이러한 양방향 데이트흐름은 새로운 기능이 추가 될 때 복잡도를 증가시키고 버그를 발생시킨다.

![이미지](https://blog.kakaocdn.net/dn/ALrHe/btqBTMSuHfN/ZlW9i9ET34e90APgCRChk1/img.png)
출처 : https://beomy.tistory.com/44
---
### Flux

Flux의 가장 큰 특징은 단방향 데이터 흐름이다. 데이터 흐름은 Dispatch -> Store -> View -> Action -> Dispatch ...
방식으로 데이터가 흐르게 된다. 이러한 단방향 데이터 흐름은 예측하기 쉽다. Flux는 크게 Dispatcher, Store, View 세 부분으로 구성된다.

#### Dispatcher

Flux의 모든 데이터 흐름을 관리하는 허브 역할을 하는 부분으로 Action이 발생되면 Dispatcher로 전달되어 진다. 전달된 Action을 보고, 등록된 콜백 함수를 실행하여 
Store에 데이터를 전달한다. Dispatcher는 전체 어플리케이션에서 한 개의 인스턴스만 사용된다.

---
#### Store

어플리케이션의 모든 상태 변경은 Store에 의해 결정이 된다. Dispatcher로 부터 메시지를 수신 받기 위해 Dispatcher에 콜백 함수를 등록해야 한다.
Store가 변경되면 View에 변경되었다는 사실을 알려주게 되여 Store는 싱글톤으로 관리하게 된다.

#### 싱글톤이란?

애플리케이션이 시작될 때 최초 한번만 메모리를 할당하고 그 메모리에 인스턴스를 만들어 사용하는 디자인 패턴이다. 객체가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나고 최초
생성 이후에 호출된 생성자는 최초에 생성한 객체를 반환한다.

---
#### View

Flux의 View는 화면에 나타내는 것 이외에 자식 View로 데이터를 흘려 보내는 View Controller 역할도 함께 한다.

---
#### Action

Dispatcher에서 콜백 함수가 실행 되면 Store가 업데이트 되게 되는데, 해당 콜백 함수를 실행 할 경우 데이터가 담겨 있는 객체가 인수로 전달 되어야 한다.
이 객체를 Action이라고 하며, Action은 대체로 액션 생성자에서 만들어 진다.